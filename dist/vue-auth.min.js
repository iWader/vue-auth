/*!
 * vue-auth v0.4.0
 * (c) 2016 Wade Urry
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("Base64")):"function"==typeof define&&define.amd?define(["Base64"],t):e.vue-auth=t(e.Base64)}(this,function(e){"use strict";function t(e,n){t.installed||(n=n||{},e.auth={storagePrefix:n.storagePrefix||"_auth.",redirectType:n.redirectType||"router",authPath:n.authPath||"/login",userData:void 0,getStorageKey:function(e){return this.storagePrefix+e},setUserData:function(e){return this.userData=e,localStorage.setItem(this.getStorageKey("user"),JSON.stringify(e))},getUserData:function(){return JSON.parse(localStorage.getItem(this.getStorageKey("user")))},setToken:function(e){return localStorage.setItem(this.getStorageKey("token"),e)},getToken:function(){return localStorage.getItem(this.getStorageKey("token"))},removeToken:function(){return localStorage.removeItem(this.getStorageKey("token"))},hasToken:function(){return null!==this.getToken()},isAuthenticated:function(){return!r.isExpired(this.getToken())},installInterceptor:function(t){var r=this;if("undefined"==typeof e.http)throw new Error("Please install vue-resource before attempting to install the interceptor.");return function(e,n){e.headers.Authorization="Bearer "+r.getToken(),n(function(e){return 401===e.status&&(t.$auth.setToken(void 0),"browser"===t.$auth.redirectType?window.location.href=t.$auth.authPath:t.$router.go(t.$auth.authPath)),e})}}},Object.defineProperties(e.prototype,{$auth:{get:function(){return e.auth}}}))}e="default"in e?e.default:e;var r={decode:function(t){var r=t.split("."),n=r[1].replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="="}return JSON.parse(decodeURIComponent(e.atob(n)))},getDeadline:function(e){var t=this.decode(e);if("undefined"==typeof t.exp)return null;var r=new Date(0);return r.setUTCSeconds(t.exp),r},isExpired:function(e){var t=this.getDeadline(e);if(null===t)return!1;var r=new Date;return t.valueOf()<=r.valueOf()}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(t),t});